# Когда мы создаем модель, в ней в конфиге мы можем указать тип материалиации объекта:
{{
    config(
        materialized = 'table',
    )
}}

# Типы материализаций можно посмотреть вот тут:
https://docs.getdbt.com/docs/build/materializations


# -----------------------ТИПЫ МАТЕРИАЛИЗАЦИЙ-----------------------

# 1. Table 

# Этот тип означает, что результат sql сохранится в таблицу (старые данные удалятся только после того, как загрузятся новые)

# 2. View 

# Этот тип создает в бд представление на основе sql запроса

# 3. Ephemeral 

# С помощью этого типа можно создать объект, которые не будет сохранен в бд (но его можно, например, использовать в других моделях)

# 4. Materialized view 

{{ config(
    materialized="<materialization_name>",
    on_configuration_change="apply" | "continue" | "fail" # Что делать при несоответствии мат представления в дбт и бд (https://docs.getdbt.com/reference/resource-configs/on_configuration_change)
) }}

# Создает материализованную таблицу