; для начала мы подключили источники в нашу бд - создали подключение к внешним таблицам с помощью расширения postgres_fwd


; Дальше нам необходимо создать источники в dbt - их будем создавать в папке models=>staging (для каждого источника своя папка)
; Источники прописываются при помощи файлов yml (задаются их параметры). После настройки источников в yml и настройки там их конфигурации, мы можем их использовать в sql
; Далее для каждого объекта (таблицы) создаем свой sql файл (модель)

; нажав кнопку build project в окне vsc выполнятся все sql команды в базе данных
; каждый sql - запрос select. В его конфиге написано, что делать с результатов этого селекта

{{
    config(
        materialized = 'table',
    )
}}

; такой конфиг означает, что результат необходимо сохранить в таблицу
; после билда проекта все таблицы появятся в бд


; в yml можно настроить проверку свежести данных (подробности в _flights__sources.yml)
; Для проерки свежести данных (по настройкам из yml) команда:
; dbt source freshness